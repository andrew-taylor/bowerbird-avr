<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MyUSB Library: USBTask.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='../../open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='../../closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='../../closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="../../classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="../../dir_2e1fbef791c6441b28631243cfb4eaa5.html">MyUSB</a>&nbsp;&raquo&nbsp;<a class="el" href="../../dir_88a6e91c5675e76375b47b277a58e3e8.html">Drivers</a>&nbsp;&raquo&nbsp;<a class="el" href="../../dir_cf4f163638ad68cd11bd930d84c7b552.html">USB</a>&nbsp;&raquo&nbsp;<a class="el" href="../../dir_b5c6f364768553a60d6eadc38ce533df.html">HighLevel</a>
  </div>
</div>
<div class="contents">
<h1>USBTask.h File Reference</h1><code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;stdbool.h&gt;</code><br>
<code>#include &lt;stddef.h&gt;</code><br>
<code>#include &quot;<a class="el" href="../../d1/d6e/a00073.html">../../../Scheduler/Scheduler.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="../../da/d24/a00068.html">../LowLevel/LowLevel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="../../d5/de0/a00050.html">../LowLevel/HostChapter9.h</a>&quot;</code><br>
<code>#include &quot;../LowLevel/USBMode.h&quot;</code><br>
<code>#include &quot;<a class="el" href="../../d5/db6/a00042.html">Events.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="../../da/dec/a00080.html">StdDescriptors.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#2fe493657e3ddf855066e40b6c5ee817">RAISES_EVENT</a> (USB_Connect)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#38d674d3fbd080338f02e95801d59914">RAISES_EVENT</a> (USB_DeviceAttached)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#e11d18df87e52c05f2d06fa86466a8bc">RAISES_EVENT</a> (USB_DeviceUnattached)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#0b4479c6984c8e966b6faa402c64b662">RAISES_EVENT</a> (USB_DeviceEnumerationFailed)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#595fb5ef0736e8e18145125a13f51ff5">RAISES_EVENT</a> (USB_DeviceEnumerationComplete)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#63cbce5d398636640a749bec60e2b973">RAISES_EVENT</a> (USB_Disconnect)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#96edfe677909b2622ca8af9b6179eebf">TASK</a> (USB_USBTask)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#7776fba23d974d9ecf93272d9e722582">USB_IsConnected</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#df52dcb1f8b7460435e3f2eb90953aba">USB_IsInitialized</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dec/a00090.html#3a07df098dd21e61246a903a667aa5af">USB_HostState</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Main library USB management task for both Host and Device mode operations. This contains the master USB_USBTask task which should be periodically run to service both host and device USB projects. <hr><h2>Function Documentation</h2>
<a class="anchor" name="63cbce5d398636640a749bec60e2b973"></a><!-- doxytag: member="USBTask.h::RAISES_EVENT" ref="63cbce5d398636640a749bec60e2b973" args="(USB_Disconnect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RAISES_EVENT           </td>
          <td>(</td>
          <td class="paramtype">USB_Disconnect&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This module raises the USB Disconnect event when an attached USB device is removed from the USB bus.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db6/a00042.html">Events.h</a> for more information on this event. </dd></dl>

</div>
</div><p>
<a class="anchor" name="595fb5ef0736e8e18145125a13f51ff5"></a><!-- doxytag: member="USBTask.h::RAISES_EVENT" ref="595fb5ef0736e8e18145125a13f51ff5" args="(USB_DeviceEnumerationComplete)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RAISES_EVENT           </td>
          <td>(</td>
          <td class="paramtype">USB_DeviceEnumerationComplete&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This module raises the USB Device Enumeration Complete event when in host mode, and an attached USB device has been successfully enumerated and ready to be used by the user application.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db6/a00042.html">Events.h</a> for more information on this event. </dd></dl>

</div>
</div><p>
<a class="anchor" name="0b4479c6984c8e966b6faa402c64b662"></a><!-- doxytag: member="USBTask.h::RAISES_EVENT" ref="0b4479c6984c8e966b6faa402c64b662" args="(USB_DeviceEnumerationFailed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RAISES_EVENT           </td>
          <td>(</td>
          <td class="paramtype">USB_DeviceEnumerationFailed&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This module raises the USB Device Enumeration Failed event when in host mode, and an attached USB device has failed to successfully enumerated.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db6/a00042.html">Events.h</a> for more information on this event. </dd></dl>

</div>
</div><p>
<a class="anchor" name="e11d18df87e52c05f2d06fa86466a8bc"></a><!-- doxytag: member="USBTask.h::RAISES_EVENT" ref="e11d18df87e52c05f2d06fa86466a8bc" args="(USB_DeviceUnattached)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RAISES_EVENT           </td>
          <td>(</td>
          <td class="paramtype">USB_DeviceUnattached&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This module raises the USB Device Unattached event when in host mode, and a device is removed from the AVR's USB interface.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db6/a00042.html">Events.h</a> for more information on this event. </dd></dl>

</div>
</div><p>
<a class="anchor" name="38d674d3fbd080338f02e95801d59914"></a><!-- doxytag: member="USBTask.h::RAISES_EVENT" ref="38d674d3fbd080338f02e95801d59914" args="(USB_DeviceAttached)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RAISES_EVENT           </td>
          <td>(</td>
          <td class="paramtype">USB_DeviceAttached&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This module raises the USB Device Attached event when in host mode, and a device is attached to the AVR's USB interface.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db6/a00042.html">Events.h</a> for more information on this event. </dd></dl>

</div>
</div><p>
<a class="anchor" name="2fe493657e3ddf855066e40b6c5ee817"></a><!-- doxytag: member="USBTask.h::RAISES_EVENT" ref="2fe493657e3ddf855066e40b6c5ee817" args="(USB_Connect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RAISES_EVENT           </td>
          <td>(</td>
          <td class="paramtype">USB_Connect&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This module raises the USB Connect event when a USB device has been connected whilst in host mode, but not yet enumerated.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db6/a00042.html">Events.h</a> for more information on this event. </dd></dl>

</div>
</div><p>
<a class="anchor" name="96edfe677909b2622ca8af9b6179eebf"></a><!-- doxytag: member="USBTask.h::TASK" ref="96edfe677909b2622ca8af9b6179eebf" args="(USB_USBTask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TASK           </td>
          <td>(</td>
          <td class="paramtype">USB_USBTask&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the main USB management task. The USB driver requires that this task be executed continuously when the USB system is active (device attached in host mode, or attached to a host in device mode) in order to manage USB communications. This task may be executed inside an RTOS, scheduler (e.g. the simple MyUSB Scheduler), fast timer ISR or the main user application loop.<p>
The USB task must be serviced within 50mS in all modes, when needed. The task may be serviced at all times, or (for minimum CPU consumption):<p>
&gt; In device mode, it may be disabled at startup, enabled on the firing of the USB_Connect event and disabled again on the firing of the USB_Disconnect event.<p>
&gt; In host mode, it may be disabled at startup, enabled on the firing of the USB_DeviceAttached event and disabled again on the firing of the USB_DeviceUnattached event.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db6/a00042.html">Events.h</a> for more information on the USB events. </dd></dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="3a07df098dd21e61246a903a667aa5af"></a><!-- doxytag: member="USBTask.h::USB_HostState" ref="3a07df098dd21e61246a903a667aa5af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="../../d9/dec/a00090.html#3a07df098dd21e61246a903a667aa5af">USB_HostState</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates the current host state machine state. When in host mode, this indicates the state via one of the values of the USB_Host_States_t enum values in <a class="el" href="../../d4/dca/a00048.html">Host.h</a>.<p>
This value may be altered by the user application to implement the HOST_STATE_Addressed, HOST_STATE_Configured, HOST_STATE_Ready and HOST_STATE_Suspended states which are not implemented by the library.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This global is only present if the user application can be a USB host. </dd></dl>

</div>
</div><p>
<a class="anchor" name="7776fba23d974d9ecf93272d9e722582"></a><!-- doxytag: member="USBTask.h::USB_IsConnected" ref="7776fba23d974d9ecf93272d9e722582" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool <a class="el" href="../../d9/dec/a00090.html#7776fba23d974d9ecf93272d9e722582">USB_IsConnected</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates if the USB interface is currently connected to a host if in device mode, or to a device while running in host mode.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This variable should be treated as read-only in the user application, and never manually changed in value. </dd></dl>

</div>
</div><p>
<a class="anchor" name="df52dcb1f8b7460435e3f2eb90953aba"></a><!-- doxytag: member="USBTask.h::USB_IsInitialized" ref="df52dcb1f8b7460435e3f2eb90953aba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool <a class="el" href="../../d9/dec/a00090.html#df52dcb1f8b7460435e3f2eb90953aba">USB_IsInitialized</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates if the USB interface is currently initialized but not neccesarily connected to a host or device (i.e. if <a class="el" href="../../dc/ddf/a00067.html#22b285b5403cf48fc8fc587921278563">USB_Init()</a> has been run).<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This variable should be treated as read-only in the user application, and never manually changed in value. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Oct 2 18:01:18 2008 for MyUSB Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
